"use client";

import { useChatStore } from "@/lib/stores/chat-store";
import { Check, ChevronDown, Sparkles, Atom } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"; // Replace with correct path

const MODELS = [
  {
    id: "gpt-5",
    name: "ChatGPT 5",
    description: "Our smartest model & more",
    upgrade: true,
    icon: <Sparkles className="w-4 h-4 text-white" />,
  },
  {
    id: "claude-sonnet-4",
    name: "Claude Sonnet 4",
    description: "Great for everyday tasks",
    upgrade: true,
    icon: <Atom className="w-4 h-4 text-zinc-400" />,
  },
  {
    id: "gpt-5-thinking",
    name: "ChatGPT 5 Thinking",
    description: "Great for everyday tasks",
    upgrade: true,
    icon: <Atom className="w-4 h-4 text-zinc-400" />,
  },
];

export function ModelDropdown() {
  const { selectedModel, switchModel } = useChatStore();

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost">
          {selectedModel} <ChevronDown className="h-4 w-4 ml-2" />
        </Button>
      </DropdownMenuTrigger>

      <DropdownMenuContent className="w-72 py-1">
        {MODELS.map((m) => (
          <DropdownMenuItem
            key={m.name}
            onClick={() => switchModel(m.name)}
            className="focus:bg-accent px-4 py-2 cursor-pointer flex justify-between items-center gap-3"
          >
            {/* Left Section: Icon + Text */}
            <div className="flex items-start gap-3">
              <div className="pt-1">{m.icon}</div>
              <div className="flex flex-col">
                <span className="text-sm font-normal">{m.name}</span>
                <span className="text-xs text-muted-foreground">
                  {m.description}
                </span>
              </div>
            </div>

            {/* Right Section: Upgrade badge + Check */}
            <div className="flex items-center gap-2 ml-auto">
              {m.upgrade && (
                <span className="text-xs text-muted-foreground border border-muted-foreground rounded-md px-2 py-0.5">
                  Upgrade
                </span>
              )}
              {selectedModel === m.name && (
                <Check className="w-4 h-4 text-zinc-300" />
              )}
            </div>
          </DropdownMenuItem>
        ))}
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
